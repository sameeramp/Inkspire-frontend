{"ast":null,"code":"import _regeneratorRuntime from\"/home/sameeramp/Videos/Inkspire-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sameeramp/Videos/Inkspire-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sameeramp/Videos/Inkspire-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useNavigate,useLocation,Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{BACKEND_BASE_URL,BLOG_URL,BLOG_SINGLE,BLOG_DELETE,HOME,SHOW_BLOGS,UPDATE_BLOGS}from\"../../constants\";import\"../Component.scss\";import{Navbar,Footer,Modal}from\"../../shared/components\";import{setUpdateBlog}from\"../../../features/blog/blogSlice\";import{apiHandler}from\"../../shared/utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ShowOneFullBlog=function ShowOneFullBlog(){var _currentLocation$stat,_currentLocation$stat2,_user$userDetails5;var currentLocation=useLocation();var id=currentLocation===null||currentLocation===void 0?void 0:(_currentLocation$stat=currentLocation.state)===null||_currentLocation$stat===void 0?void 0:_currentLocation$stat.id;var userId=currentLocation===null||currentLocation===void 0?void 0:(_currentLocation$stat2=currentLocation.state)===null||_currentLocation$stat2===void 0?void 0:_currentLocation$stat2.userId;var navigate=useNavigate();var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),blog=_useState4[0],setBlog=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAuthor=_useState6[0],setAuthor=_useState6[1];var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modal=_useState8[0],setModal=_useState8[1];var deleteHandler=function deleteHandler(event){setModal(true);};var confirmHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _user$userDetails,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(event===\"delete\")){_context.next=5;break;}_context.next=3;return apiHandler(\"\",user===null||user===void 0?void 0:(_user$userDetails=user.userDetails)===null||_user$userDetails===void 0?void 0:_user$userDetails.token,\"DELETE_BLOG\",BACKEND_BASE_URL,BLOG_URL,BLOG_DELETE,id);case 3:response=_context.sent;if(response.data||response){setModal(false);dispatch(setUpdateBlog());navigate(SHOW_BLOGS);}case 5:case\"end\":return _context.stop();}},_callee);}));return function confirmHandler(_x){return _ref.apply(this,arguments);};}();var cancelHandler=function cancelHandler(event){if(event===\"cancel\")setModal(false);};var fetchApi=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var _user$userDetails2;var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return apiHandler(\"\",user===null||user===void 0?void 0:(_user$userDetails2=user.userDetails)===null||_user$userDetails2===void 0?void 0:_user$userDetails2.token,\"AUTHOR_BLOGS\",BACKEND_BASE_URL,BLOG_URL,BLOG_SINGLE,id);case 2:response=_context2.sent;setBlog(response===null||response===void 0?void 0:response.data);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function fetchApi(_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){if(id){fetchApi(id);}else{navigate(HOME);}},[id]);useEffect(function(){var date=new Date(blog.createdAt);var readableTime=date.toLocaleDateString();setDate(readableTime);},[blog]);useEffect(function(){var _user$userDetails3,_user$userDetails4;if((user===null||user===void 0?void 0:(_user$userDetails3=user.userDetails)===null||_user$userDetails3===void 0?void 0:_user$userDetails3.id)===userId||(user===null||user===void 0?void 0:(_user$userDetails4=user.userDetails)===null||_user$userDetails4===void 0?void 0:_user$userDetails4.isAdmin)===true)setAuthor(true);},[user]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"outerContainer-showOneFullBlog\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"firstHalf\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img\",src:\"data:image/png;base64,\".concat(blog.media),alt:\"Blog\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"secondHalf\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:blog.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"subHeading\",children:[/*#__PURE__*/_jsx(\"h3\",{children:date}),/*#__PURE__*/_jsx(\"div\",{className:\"middle\"}),/*#__PURE__*/_jsx(\"h3\",{children:blog.author||(user===null||user===void 0?void 0:(_user$userDetails5=user.userDetails)===null||_user$userDetails5===void 0?void 0:_user$userDetails5.email)||\"Name is not available\"})]}),blog.desc]})]}),modal&&/*#__PURE__*/_jsx(Modal,{confirmHandler:confirmHandler,cancelHandler:cancelHandler}),isAuthor&&/*#__PURE__*/_jsxs(\"div\",{className:\"updateButtons\",children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:UPDATE_BLOGS,state:{id:id,userId:userId},className:\"link-router-dom\",children:\"Edit Post\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteHandler,children:\"Delete Post\"})]}),/*#__PURE__*/_jsx(Footer,{})]});};","map":{"version":3,"names":["useEffect","useState","useNavigate","useLocation","Link","useDispatch","useSelector","BACKEND_BASE_URL","BLOG_URL","BLOG_SINGLE","BLOG_DELETE","HOME","SHOW_BLOGS","UPDATE_BLOGS","Navbar","Footer","Modal","setUpdateBlog","apiHandler","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ShowOneFullBlog","_currentLocation$stat","_currentLocation$stat2","_user$userDetails5","currentLocation","id","state","userId","navigate","dispatch","_useState","_useState2","_slicedToArray","date","setDate","_useState3","_useState4","blog","setBlog","_useState5","_useState6","isAuthor","setAuthor","_useSelector","auth","user","_useState7","_useState8","modal","setModal","deleteHandler","event","confirmHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_user$userDetails","response","wrap","_callee$","_context","prev","next","userDetails","token","sent","data","stop","_x","apply","arguments","cancelHandler","fetchApi","_ref2","_callee2","_user$userDetails2","_callee2$","_context2","_x2","Date","createdAt","readableTime","toLocaleDateString","_user$userDetails3","_user$userDetails4","isAdmin","children","className","src","concat","media","alt","title","author","email","desc","to","onClick"],"sources":["/home/sameeramp/Videos/Inkspire-frontend/src/components/blog/showOneFullBlog/Component.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  BACKEND_BASE_URL,\n  BLOG_URL,\n  BLOG_SINGLE,\n  BLOG_DELETE,\n  HOME,\n  SHOW_BLOGS,\n  UPDATE_BLOGS,\n} from \"../../constants\";\nimport \"../Component.scss\";\nimport { Navbar, Footer, Modal } from \"../../shared/components\";\nimport { setUpdateBlog } from \"../../../features/blog/blogSlice\";\nimport { apiHandler } from \"../../shared/utils\";\n\nexport const ShowOneFullBlog = () => {\n  const currentLocation = useLocation();\n  const id = currentLocation?.state?.id;\n  const userId = currentLocation?.state?.userId;\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [date, setDate] = useState(\"\");\n  const [blog, setBlog] = useState(\"\");\n  const [isAuthor, setAuthor] = useState(false);\n  const { user } = useSelector((state) => state.auth);\n  const [modal, setModal] = useState(false);\n\n  const deleteHandler = (event) => {\n    setModal(true);\n  };\n\n  const confirmHandler = async (event) => {\n    if (event === \"delete\") {\n      const response = await apiHandler(\n        \"\",\n        user?.userDetails?.token,\n        \"DELETE_BLOG\",\n        BACKEND_BASE_URL,\n        BLOG_URL,\n        BLOG_DELETE,\n        id\n      );\n      if (response.data || response) {\n        setModal(false);\n        dispatch(setUpdateBlog());\n        navigate(SHOW_BLOGS);\n      }\n    }\n  };\n  const cancelHandler = (event) => {\n    if (event === \"cancel\") setModal(false);\n  };\n\n  const fetchApi = async (id) => {\n    const response = await apiHandler(\n      \"\",\n      user?.userDetails?.token,\n      \"AUTHOR_BLOGS\",\n      BACKEND_BASE_URL,\n      BLOG_URL,\n      BLOG_SINGLE,\n      id\n    );\n    setBlog(response?.data);\n  };\n\n  useEffect(() => {\n    if (id) {\n      fetchApi(id);\n    } else {\n      navigate(HOME);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    const date = new Date(blog.createdAt);\n    const readableTime = date.toLocaleDateString();\n    setDate(readableTime);\n  }, [blog]);\n\n  useEffect(() => {\n    if (\n      user?.userDetails?.id === userId ||\n      user?.userDetails?.isAdmin === true\n    ) setAuthor(true);\n  }, [user]);\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"outerContainer-showOneFullBlog\">\n        <div className=\"firstHalf\">\n          <img\n            className=\"img\"\n            src={`data:image/png;base64,${blog.media}`}\n            alt=\"Blog\"\n          />\n        </div>\n        <div className=\"secondHalf\">\n          <div>\n            <h1>{blog.title}</h1>\n          </div>\n          <div className=\"subHeading\">\n            <h3>{date}</h3>\n            <div className=\"middle\"></div>\n            <h3>\n              {blog.author ||\n                user?.userDetails?.email ||\n                \"Name is not available\"}\n            </h3>\n          </div>\n          {blog.desc}\n        </div>\n      </div>\n      {modal && (\n        <Modal confirmHandler={confirmHandler} cancelHandler={cancelHandler} />\n      )}\n      {isAuthor && (\n        <div className=\"updateButtons\">\n          <button>\n            <Link\n              to={UPDATE_BLOGS}\n              state={{\n                id,\n                userId,\n              }}\n              className=\"link-router-dom\"\n            >\n              Edit Post\n            </Link>\n          </button>\n          <button onClick={deleteHandler}>Delete Post</button>\n        </div>\n      )}\n      <Footer />\n    </>\n  );\n};\n"],"mappings":"0YAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CACjE,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OACEC,gBAAgB,CAChBC,QAAQ,CACRC,WAAW,CACXC,WAAW,CACXC,IAAI,CACJC,UAAU,CACVC,YAAY,KACP,iBAAiB,CACxB,MAAO,mBAAmB,CAC1B,OAASC,MAAM,CAAEC,MAAM,CAAEC,KAAK,KAAQ,yBAAyB,CAC/D,OAASC,aAAa,KAAQ,kCAAkC,CAChE,OAASC,UAAU,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEhD,MAAO,IAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,KAAAC,qBAAA,CAAAC,sBAAA,CAAAC,kBAAA,CACnC,GAAM,CAAAC,eAAe,CAAG1B,WAAW,CAAC,CAAC,CACrC,GAAM,CAAA2B,EAAE,CAAGD,eAAe,SAAfA,eAAe,kBAAAH,qBAAA,CAAfG,eAAe,CAAEE,KAAK,UAAAL,qBAAA,iBAAtBA,qBAAA,CAAwBI,EAAE,CACrC,GAAM,CAAAE,MAAM,CAAGH,eAAe,SAAfA,eAAe,kBAAAF,sBAAA,CAAfE,eAAe,CAAEE,KAAK,UAAAJ,sBAAA,iBAAtBA,sBAAA,CAAwBK,MAAM,CAC7C,GAAM,CAAAC,QAAQ,CAAG/B,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAgC,QAAQ,CAAG7B,WAAW,CAAC,CAAC,CAC9B,IAAA8B,SAAA,CAAwBlC,QAAQ,CAAC,EAAE,CAAC,CAAAmC,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAAwBvC,QAAQ,CAAC,EAAE,CAAC,CAAAwC,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAA8B3C,QAAQ,CAAC,KAAK,CAAC,CAAA4C,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAtCE,QAAQ,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IAC1B,IAAAG,YAAA,CAAiB1C,WAAW,CAAC,SAACyB,KAAK,QAAK,CAAAA,KAAK,CAACkB,IAAI,GAAC,CAA3CC,IAAI,CAAAF,YAAA,CAAJE,IAAI,CACZ,IAAAC,UAAA,CAA0BlD,QAAQ,CAAC,KAAK,CAAC,CAAAmD,UAAA,CAAAf,cAAA,CAAAc,UAAA,IAAlCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAEtB,GAAM,CAAAG,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,CAAK,CAC/BF,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAC,CAED,GAAM,CAAAG,cAAc,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAON,KAAK,MAAAO,iBAAA,CAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,cAC7Bb,KAAK,GAAK,QAAQ,GAAAW,QAAA,CAAAE,IAAA,UAAAF,QAAA,CAAAE,IAAA,SACG,CAAAnD,UAAU,CAC/B,EAAE,CACFgC,IAAI,SAAJA,IAAI,kBAAAa,iBAAA,CAAJb,IAAI,CAAEoB,WAAW,UAAAP,iBAAA,iBAAjBA,iBAAA,CAAmBQ,KAAK,CACxB,aAAa,CACbhE,gBAAgB,CAChBC,QAAQ,CACRE,WAAW,CACXoB,EACF,CAAC,QARKkC,QAAQ,CAAAG,QAAA,CAAAK,IAAA,CASd,GAAIR,QAAQ,CAACS,IAAI,EAAIT,QAAQ,CAAE,CAC7BV,QAAQ,CAAC,KAAK,CAAC,CACfpB,QAAQ,CAACjB,aAAa,CAAC,CAAC,CAAC,CACzBgB,QAAQ,CAACrB,UAAU,CAAC,CACtB,CAAC,wBAAAuD,QAAA,CAAAO,IAAA,MAAAZ,OAAA,GAEJ,kBAjBK,CAAAL,cAAcA,CAAAkB,EAAA,SAAAjB,IAAA,CAAAkB,KAAA,MAAAC,SAAA,OAiBnB,CACD,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAItB,KAAK,CAAK,CAC/B,GAAIA,KAAK,GAAK,QAAQ,CAAEF,QAAQ,CAAC,KAAK,CAAC,CACzC,CAAC,CAED,GAAM,CAAAyB,QAAQ,6BAAAC,KAAA,CAAArB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAoB,SAAOnD,EAAE,MAAAoD,kBAAA,KAAAlB,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAkB,UAAAC,SAAA,iBAAAA,SAAA,CAAAhB,IAAA,CAAAgB,SAAA,CAAAf,IAAA,SAAAe,SAAA,CAAAf,IAAA,SACD,CAAAnD,UAAU,CAC/B,EAAE,CACFgC,IAAI,SAAJA,IAAI,kBAAAgC,kBAAA,CAAJhC,IAAI,CAAEoB,WAAW,UAAAY,kBAAA,iBAAjBA,kBAAA,CAAmBX,KAAK,CACxB,cAAc,CACdhE,gBAAgB,CAChBC,QAAQ,CACRC,WAAW,CACXqB,EACF,CAAC,QARKkC,QAAQ,CAAAoB,SAAA,CAAAZ,IAAA,CASd7B,OAAO,CAACqB,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAES,IAAI,CAAC,CAAC,wBAAAW,SAAA,CAAAV,IAAA,MAAAO,QAAA,GACzB,kBAXK,CAAAF,QAAQA,CAAAM,GAAA,SAAAL,KAAA,CAAAJ,KAAA,MAAAC,SAAA,OAWb,CAED7E,SAAS,CAAC,UAAM,CACd,GAAI8B,EAAE,CAAE,CACNiD,QAAQ,CAACjD,EAAE,CAAC,CACd,CAAC,IAAM,CACLG,QAAQ,CAACtB,IAAI,CAAC,CAChB,CACF,CAAC,CAAE,CAACmB,EAAE,CAAC,CAAC,CAER9B,SAAS,CAAC,UAAM,CACd,GAAM,CAAAsC,IAAI,CAAG,GAAI,CAAAgD,IAAI,CAAC5C,IAAI,CAAC6C,SAAS,CAAC,CACrC,GAAM,CAAAC,YAAY,CAAGlD,IAAI,CAACmD,kBAAkB,CAAC,CAAC,CAC9ClD,OAAO,CAACiD,YAAY,CAAC,CACvB,CAAC,CAAE,CAAC9C,IAAI,CAAC,CAAC,CAEV1C,SAAS,CAAC,UAAM,KAAA0F,kBAAA,CAAAC,kBAAA,CACd,GACE,CAAAzC,IAAI,SAAJA,IAAI,kBAAAwC,kBAAA,CAAJxC,IAAI,CAAEoB,WAAW,UAAAoB,kBAAA,iBAAjBA,kBAAA,CAAmB5D,EAAE,IAAKE,MAAM,EAChC,CAAAkB,IAAI,SAAJA,IAAI,kBAAAyC,kBAAA,CAAJzC,IAAI,CAAEoB,WAAW,UAAAqB,kBAAA,iBAAjBA,kBAAA,CAAmBC,OAAO,IAAK,IAAI,CACnC7C,SAAS,CAAC,IAAI,CAAC,CACnB,CAAC,CAAE,CAACG,IAAI,CAAC,CAAC,CAEV,mBACE5B,KAAA,CAAAE,SAAA,EAAAqE,QAAA,eACEzE,IAAA,CAACN,MAAM,GAAE,CAAC,cACVQ,KAAA,QAAKwE,SAAS,CAAC,gCAAgC,CAAAD,QAAA,eAC7CzE,IAAA,QAAK0E,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxBzE,IAAA,QACE0E,SAAS,CAAC,KAAK,CACfC,GAAG,0BAAAC,MAAA,CAA2BtD,IAAI,CAACuD,KAAK,CAAG,CAC3CC,GAAG,CAAC,MAAM,CACX,CAAC,CACC,CAAC,cACN5E,KAAA,QAAKwE,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzBzE,IAAA,QAAAyE,QAAA,cACEzE,IAAA,OAAAyE,QAAA,CAAKnD,IAAI,CAACyD,KAAK,CAAK,CAAC,CAClB,CAAC,cACN7E,KAAA,QAAKwE,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzBzE,IAAA,OAAAyE,QAAA,CAAKvD,IAAI,CAAK,CAAC,cACflB,IAAA,QAAK0E,SAAS,CAAC,QAAQ,CAAM,CAAC,cAC9B1E,IAAA,OAAAyE,QAAA,CACGnD,IAAI,CAAC0D,MAAM,GACVlD,IAAI,SAAJA,IAAI,kBAAAtB,kBAAA,CAAJsB,IAAI,CAAEoB,WAAW,UAAA1C,kBAAA,iBAAjBA,kBAAA,CAAmByE,KAAK,GACxB,uBAAuB,CACvB,CAAC,EACF,CAAC,CACL3D,IAAI,CAAC4D,IAAI,EACP,CAAC,EACH,CAAC,CACLjD,KAAK,eACJjC,IAAA,CAACJ,KAAK,EAACyC,cAAc,CAAEA,cAAe,CAACqB,aAAa,CAAEA,aAAc,CAAE,CACvE,CACAhC,QAAQ,eACPxB,KAAA,QAAKwE,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5BzE,IAAA,WAAAyE,QAAA,cACEzE,IAAA,CAAChB,IAAI,EACHmG,EAAE,CAAE1F,YAAa,CACjBkB,KAAK,CAAE,CACLD,EAAE,CAAFA,EAAE,CACFE,MAAM,CAANA,MACF,CAAE,CACF8D,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAC5B,WAED,CAAM,CAAC,CACD,CAAC,cACTzE,IAAA,WAAQoF,OAAO,CAAEjD,aAAc,CAAAsC,QAAA,CAAC,aAAW,CAAQ,CAAC,EACjD,CACN,cACDzE,IAAA,CAACL,MAAM,GAAE,CAAC,EACV,CAAC,CAEP,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}