{"ast":null,"code":"import _slicedToArray from\"/home/sameeramp/Videos/Inkspire-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useReducer}from\"react\";import\"../shared/styles/Authentication.scss\";// import {\n//   ErrorMsg,\n//   Heading2,\n//   InputField,\n//   Label,\n//   SubmitButton,\n// } from \"../shared/components\";\nimport{ErrorMsg}from\"../shared/components/atomicComponents/ErrorMsg.jsx\";import{Heading2}from\"../shared/components/atomicComponents/Heading.jsx\";import{InputField}from\"../shared/components/atomicComponents/InputField.jsx\";import{Label}from\"../shared/components/atomicComponents/Label.jsx\";import{SubmitButton}from\"../shared/components/atomicComponents/SubmitButton.jsx\";import{useFocus}from\"../customHooks/useFocus.js\";// import {\n//   changeToSmallCase,\n//   formReducer,\n//   isValidEmail,\n//   isValidPasswrd,\n//   trimElement,\n// } from \"../shared/utils\";\nimport{changeToSmallCase}from\"../shared/utils/generalFunc.js\";import{formReducer}from\"../shared/utils/reducerHandler.js\";import{isValidEmail}from\"../shared/utils/validaton.js\";import{isValidPasswrd}from\"../shared/utils/validaton.js\";import{trimElement}from\"../shared/utils/generalFunc.js\";// import {\n//   AUTH_ERROR_LOGIN,\n//   BUTTON_NAME,\n//   EMAIL_ERROR,\n//   EMAIL_INPUT_NAME,\n//   EMAIL_PLACEHOLDER,\n//   LOGIN_HEADING,\n//   FIELD_NULL_ERROR,\n//   PASSWORD_ERROR,\n//   PASSWORD_INPUT_NAME,\n//   PASSWORD_PLACEHOLDER,\n//   HOME,\n//   REGISTER,\n// } from \"../constants\";\nimport{AUTH_ERROR_LOGIN}from\"../constants/authentication.js\";import{BUTTON_NAME}from\"../constants/authentication.js\";import{EMAIL_ERROR}from\"../constants/authentication.js\";import{EMAIL_INPUT_NAME}from\"../constants/authentication.js\";import{EMAIL_PLACEHOLDER}from\"../constants/authentication.js\";import{LOGIN_HEADING}from\"../constants/authentication.js\";import{FIELD_NULL_ERROR}from\"../constants/authentication.js\";import{PASSWORD_ERROR}from\"../constants/authentication.js\";import{PASSWORD_INPUT_NAME}from\"../constants/authentication.js\";import{PASSWORD_PLACEHOLDER}from\"../constants/authentication.js\";import{HOME}from\"../constants/routePaths.js\";import{REGISTER}from\"../constants/routePaths.js\";import{reset,signin}from\"../../features/auth/authSlice\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={email:\"\",password:\"\"};export var Login=function Login(){var navigate=useNavigate();var reduxDispatch=useDispatch();var _useReducer=useReducer(formReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),formData=_useReducer2[0],dispatch=_useReducer2[1];var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user,isError=_useSelector.isError;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var handleInputChange=function handleInputChange(event){dispatch({type:\"SET_FIELD_VALUE\",fieldName:event.target.name,fieldValue:event.target.value});};var handleClick=function handleClick(e){e.preventDefault();var isMailContent=trimElement(formData.email);var isPasswrdContent=trimElement(formData.password);if(!isMailContent||!isPasswrdContent){setError(FIELD_NULL_ERROR);}else{var isMail=isValidEmail(formData.email);var isPasswrd=isValidPasswrd(formData.password);if(!isMail){setError(EMAIL_ERROR);}else if(!isPasswrd){setError(PASSWORD_ERROR);}else{var userData={email:formData.email,password:formData.password};reduxDispatch(signin(userData));dispatch({type:\"RESET_FORM\"});}}};useEffect(function(){if(isError)setError(AUTH_ERROR_LOGIN);},[isError]);useEffect(function(){if(user)navigate(HOME);},[user]);useEffect(function(){var timer=setTimeout(function(){setError(\"\");reduxDispatch(reset());},3000);return function(){clearTimeout(timer);};},[error]);var inputRef=useFocus();var mail=changeToSmallCase(EMAIL_INPUT_NAME);var passwrd=changeToSmallCase(PASSWORD_INPUT_NAME);var btn=changeToSmallCase(BUTTON_NAME);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Heading2,{heading:LOGIN_HEADING}),/*#__PURE__*/_jsxs(\"form\",{className:\"container\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:mail,label:EMAIL_INPUT_NAME}),/*#__PURE__*/_jsx(InputField,{value:formData.email,ref:inputRef,onChange:handleInputChange,type:mail,id:mail,name:mail,placeholder:EMAIL_PLACEHOLDER}),/*#__PURE__*/_jsx(Label,{htmlFor:passwrd,label:PASSWORD_INPUT_NAME}),/*#__PURE__*/_jsx(InputField,{value:formData.password,focus:false,onChange:handleInputChange,type:passwrd,id:passwrd,name:passwrd,placeholder:PASSWORD_PLACEHOLDER}),error&&/*#__PURE__*/_jsx(ErrorMsg,{msg:error}),/*#__PURE__*/_jsx(SubmitButton,{onClick:handleClick,type:btn,name:BUTTON_NAME}),/*#__PURE__*/_jsx(\"div\",{className:\"link\",children:/*#__PURE__*/_jsx(Link,{to:REGISTER,children:\"Not registered yet?\"})})]})]});};","map":{"version":3,"names":["useState","useEffect","useReducer","ErrorMsg","Heading2","InputField","Label","SubmitButton","useFocus","changeToSmallCase","formReducer","isValidEmail","isValidPasswrd","trimElement","AUTH_ERROR_LOGIN","BUTTON_NAME","EMAIL_ERROR","EMAIL_INPUT_NAME","EMAIL_PLACEHOLDER","LOGIN_HEADING","FIELD_NULL_ERROR","PASSWORD_ERROR","PASSWORD_INPUT_NAME","PASSWORD_PLACEHOLDER","HOME","REGISTER","reset","signin","useDispatch","useSelector","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","initialState","email","password","Login","navigate","reduxDispatch","_useReducer","_useReducer2","_slicedToArray","formData","dispatch","_useSelector","state","auth","user","isError","_useState","_useState2","error","setError","handleInputChange","event","type","fieldName","target","name","fieldValue","value","handleClick","e","preventDefault","isMailContent","isPasswrdContent","isMail","isPasswrd","userData","timer","setTimeout","clearTimeout","inputRef","mail","passwrd","btn","children","heading","className","htmlFor","label","ref","onChange","id","placeholder","focus","msg","onClick","to"],"sources":["/home/sameeramp/Videos/Inkspire-frontend/src/components/login/Component.jsx"],"sourcesContent":["import { useState, useEffect, useReducer } from \"react\";\nimport \"../shared/styles/Authentication.scss\";\n// import {\n//   ErrorMsg,\n//   Heading2,\n//   InputField,\n//   Label,\n//   SubmitButton,\n// } from \"../shared/components\";\nimport {\n  ErrorMsg,\n} from \"../shared/components/atomicComponents/ErrorMsg.jsx\";\nimport {\n  Heading2,\n} from \"../shared/components/atomicComponents/Heading.jsx\";\nimport {\n  InputField,\n} from \"../shared/components/atomicComponents/InputField.jsx\";\nimport {\n  Label,\n} from \"../shared/components/atomicComponents/Label.jsx\";\nimport {\n  SubmitButton,\n} from \"../shared/components/atomicComponents/SubmitButton.jsx\";\n\n\nimport { useFocus } from \"../customHooks/useFocus.js\";\n// import {\n//   changeToSmallCase,\n//   formReducer,\n//   isValidEmail,\n//   isValidPasswrd,\n//   trimElement,\n// } from \"../shared/utils\";\nimport { changeToSmallCase } from \"../shared/utils/generalFunc.js\";\nimport { formReducer } from \"../shared/utils/reducerHandler.js\";\nimport { isValidEmail } from \"../shared/utils/validaton.js\";\nimport { isValidPasswrd } from \"../shared/utils/validaton.js\";\nimport { trimElement } from \"../shared/utils/generalFunc.js\";\n\n// import {\n//   AUTH_ERROR_LOGIN,\n//   BUTTON_NAME,\n//   EMAIL_ERROR,\n//   EMAIL_INPUT_NAME,\n//   EMAIL_PLACEHOLDER,\n//   LOGIN_HEADING,\n//   FIELD_NULL_ERROR,\n//   PASSWORD_ERROR,\n//   PASSWORD_INPUT_NAME,\n//   PASSWORD_PLACEHOLDER,\n//   HOME,\n//   REGISTER,\n// } from \"../constants\";\n\nimport {\n  AUTH_ERROR_LOGIN\n} from \"../constants/authentication.js\";\nimport {\n  BUTTON_NAME\n} from \"../constants/authentication.js\";\nimport {\n  EMAIL_ERROR\n} from \"../constants/authentication.js\";\nimport {\n  EMAIL_INPUT_NAME\n} from \"../constants/authentication.js\";\nimport {\n  EMAIL_PLACEHOLDER\n} from \"../constants/authentication.js\";\nimport {\n  LOGIN_HEADING\n} from \"../constants/authentication.js\";\nimport {\n  FIELD_NULL_ERROR\n} from \"../constants/authentication.js\";\n\nimport {\n  PASSWORD_ERROR\n} from \"../constants/authentication.js\";\nimport {\n  PASSWORD_INPUT_NAME\n} from \"../constants/authentication.js\";\nimport {\n  PASSWORD_PLACEHOLDER\n} from \"../constants/authentication.js\";\nimport {\n  HOME\n} from \"../constants/routePaths.js\";\nimport {\n  REGISTER\n} from \"../constants/routePaths.js\";\n\n\nimport { reset, signin } from \"../../features/auth/authSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nconst initialState = {\n  email: \"\",\n  password: \"\",\n};\n\nexport const Login = () => {\n  const navigate = useNavigate();\n  const reduxDispatch = useDispatch();\n  const [formData, dispatch] = useReducer(formReducer, initialState);\n  const { user, isError } = useSelector((state) => state.auth);\n  const [error, setError] = useState(\"\");\n\n  const handleInputChange = (event) => {\n    dispatch({\n      type: \"SET_FIELD_VALUE\",\n      fieldName: event.target.name,\n      fieldValue: event.target.value,\n    });\n  };\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    const isMailContent = trimElement(formData.email);\n    const isPasswrdContent = trimElement(formData.password);\n    if (!isMailContent || !isPasswrdContent) {\n      setError(FIELD_NULL_ERROR);\n    } else {\n      const isMail = isValidEmail(formData.email);\n      const isPasswrd = isValidPasswrd(formData.password);\n      if (!isMail) {\n        setError(EMAIL_ERROR);\n      } else if (!isPasswrd) {\n        setError(PASSWORD_ERROR);\n      } else {\n        const userData = {\n          email: formData.email,\n          password: formData.password,\n        };\n\n        reduxDispatch(signin(userData));\n        dispatch({ type: \"RESET_FORM\" });\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (isError) setError(AUTH_ERROR_LOGIN);\n  }, [isError]);\n\n  useEffect(() => {\n    if (user) navigate(HOME);\n  }, [user]);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setError(\"\");\n      reduxDispatch(reset());\n    }, 3000);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [error]);\n\n  const inputRef = useFocus();\n  const mail = changeToSmallCase(EMAIL_INPUT_NAME);\n  const passwrd = changeToSmallCase(PASSWORD_INPUT_NAME);\n  const btn = changeToSmallCase(BUTTON_NAME);\n\n  return (\n    <div>\n      <Heading2 heading={LOGIN_HEADING} />\n      <form className=\"container\">\n        <Label htmlFor={mail} label={EMAIL_INPUT_NAME} />\n        <InputField\n          value={formData.email}\n          ref={inputRef}\n          onChange={handleInputChange}\n          type={mail}\n          id={mail}\n          name={mail}\n          placeholder={EMAIL_PLACEHOLDER}\n        />\n\n        <Label htmlFor={passwrd} label={PASSWORD_INPUT_NAME} />\n        <InputField\n          value={formData.password}\n          focus={false}\n          onChange={handleInputChange}\n          type={passwrd}\n          id={passwrd}\n          name={passwrd}\n          placeholder={PASSWORD_PLACEHOLDER}\n        />\n\n        {error && <ErrorMsg msg={error} />}\n\n        <SubmitButton onClick={handleClick} type={btn} name={BUTTON_NAME} />\n        <div className=\"link\">\n          <Link to={REGISTER}>Not registered yet?</Link>\n        </div>\n      </form>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}